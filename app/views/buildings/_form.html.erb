<%= form_for(@building) do |f| %>
  <% if @building.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@building.errors.count, "error") %> prohibited this building from being saved:</h2>

      <ul>
      <% @building.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  
  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script>
      	$(function() {
      		var addresspicker = $( "#addresspicker" ).addresspicker();
      		var addresspickerMap = $( "#addresspicker_map" ).addresspicker({
      			regionBias: "fr",
      		  elements: {
      		    map:      "#map",
      		    lat:      "#latitude",
      		    lng:      "#longitude",
      		    address:  "#address"
      		  }
      		});
      		var gmarker = addresspickerMap.addresspicker( "marker");
      		gmarker.setVisible(true);
      		addresspickerMap.addresspicker( "updatePosition");
      
      	});
  	</script>
  	
  <div>
      <div class='input'>
        <%= f.label :address %><br />
        <%= f.text_field :address, :id => "addresspicker_map" %>
        ...
      </div>
      <div id="map"></div>
      <div id="legend">You can drag and drop the marker to the correct location</div>
  </div>
  

  <div class="field">
    <%= f.label :latitude %><br />
    <%= f.text_field :latitude %>
  </div>
  <div class="field">
    <%= f.label :longitude %><br />
    <%= f.text_field :longitude %>
  </div>
  <div class="field">
    <%= f.label :address %><br />
    <%= f.text_field :address %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
